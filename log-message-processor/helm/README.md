# sample_helm
- В данном репозитории лежит типовой helm чарт с комментариями. 
- Это nginx доступный на нод порте 30111 после установки чарта 
- Для отказоустойчивости добавлено количество реплик: 2
- Также добавлена podAntiAffinity чтобы поды не запускались на одной ноде.

## Содержимое

- _helpers.tpl - это словарь с шаблонами
- configmap.yaml - шаблон конфигмапы приложения
- deployment.yaml - шаблон диплоймента приложения
- service.yaml - шаблон сервиса
- hpa.yaml - шаблон для автоскейлера
- pdb.yml - шаблон для под-бюджета
- Chart.yaml - данные о чарте
- values.yaml - файл со значениями для шаблонов

## Установка

Перед установкой будет полезно побилдить шаблон и посмотреть, что получилось

```sh
helm template .
```

Для установки чарта необходимо выполнить команду

```sh
helm install hello-app . --set app.branch="dev" --set app.standName="dev"
```
Две переменные в конце опциональные. 
branch удобна для того, чтобы в аннотации пода всегда было видно из какой ветки он собран
standName удобен для диплоя на разные стенды с разными настройками